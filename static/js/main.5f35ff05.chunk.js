(this["webpackJsonpminesweeper-client"]=this["webpackJsonpminesweeper-client"]||[]).push([[0],{17:function(e,t,n){e.exports=n(27)},22:function(e,t,n){},23:function(e,t,n){e.exports=n.p+"static/media/bomb.a4e4175d.svg"},24:function(e,t,n){e.exports=n.p+"static/media/flag.e8649cc6.svg"},27:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(6),i=n.n(o),c=(n(22),n(3)),u=n(1),s=n(2);function l(){var e=Object(u.a)(["\n  width: 1.6rem;\n  height: 1.6rem;\n"]);return l=function(){return e},e}function d(){var e=Object(u.a)(["\n  width: 1.2rem;\n  height: 1.2rem;\n"]);return d=function(){return e},e}function f(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: #64de4b;\n        "]);return f=function(){return e},e}function h(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: #6e2020;\n        "]);return h=function(){return e},e}function v(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: #5d2d8c;\n        "]);return v=function(){return e},e}function m(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: #a34bde;\n        "]);return m=function(){return e},e}function b(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: #de4bab;\n        "]);return b=function(){return e},e}function g(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: #ff8787;\n        "]);return g=function(){return e},e}function p(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: #de9c4b;\n        "]);return p=function(){return e},e}function j(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: #b52727;\n        "]);return j=function(){return e},e}function O(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: #4bde81;\n        "]);return O=function(){return e},e}function k(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: #4444ee;\n        "]);return k=function(){return e},e}function w(){var e=Object(u.a)(["\n          background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n          color: transparent;\n        "]);return w=function(){return e},e}function E(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: bold;\n  color: white;\n  border-radius: 10px;\n  background: #e5e4ec;\n  box-shadow: 5px 5px 20px #c3c2c9, -5px -5px 20px #ffffff;\n  margin: 8px;\n  width: 50px;\n  height: 50px;\n  border: none;\n  outline: none;\n  font-size: 1.6rem;\n  &:hover {\n    cursor: pointer;\n  }\n\n  ","\n"]);return E=function(){return e},e}var y=n(23),x=n(24),S=s.b.button(E(),(function(e){switch(e.children){case 0:return Object(s.a)(w());case 1:return Object(s.a)(k());case 2:return Object(s.a)(O());case 3:return Object(s.a)(j());case 4:return Object(s.a)(p());case 5:return Object(s.a)(g());case 6:return Object(s.a)(b());case 7:return Object(s.a)(m());case 8:return Object(s.a)(v());case 9:return Object(s.a)(h());case 10:return Object(s.a)(f())}})),B=s.b.img(d()),C=s.b.img(l());var M=function(e){var t=e.children,n=e.onClick,r=e.onContextMenu;return a.a.createElement(S,{onClick:function(e){n(e)},onContextMenu:function(e){r(e)}},10===t?a.a.createElement(B,{src:y}):99===t?a.a.createElement(C,{src:x}):t)};function G(){var e=Object(u.a)(["\n  padding: 3rem 0;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return G=function(){return e},e}var I=s.b.div(G());var W=function(e){var t=e.children;return a.a.createElement(I,null,t)};function N(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return N=function(){return e},e}var R=s.b.div(N());function P(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return P=function(){return e},e}var Q=s.b.div(P());function F(){var e=Object(u.a)(["\n  border-radius: 0.4rem;\n  background: #e5e4ec;\n  box-shadow: 5px 5px 10px #c3c2c9, -5px -5px 10px #ffffff;\n  border: none;\n  padding: 0.6rem 1.5rem;\n  outline: none;\n  margin: 0 0.6rem;\n  font-weight: bold;\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:active {\n    background: linear-gradient(145deg, #cecdd4, #f5f4fd);\n  }\n"]);return F=function(){return e},e}var J=s.b.button(F());function z(){var e=Object(u.a)([""]);return z=function(){return e},e}var L=s.b.div(z());var Z=function(e){var t=e.startGame;return a.a.createElement(L,null,a.a.createElement(J,{style:{color:"#4444ee"},onClick:t},"New Game"))};function D(){var e=Object(u.a)(["\n  min-width: 300px;\n  min-height: 150px;\n  padding: 1rem;\n  background: #e5e4ec;\n  border-radius: 6px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n"]);return D=function(){return e},e}function T(){var e=Object(u.a)(["\n  opacity: 0.7;\n  color: #de4bab;\n  font-weight: bold;\n"]);return T=function(){return e},e}function Y(){var e=Object(u.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.36);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return Y=function(){return e},e}var _=s.b.div(Y()),H=s.b.p(T()),U=s.b.div(D()),$=function(e){var t=e.isShowing,n=e.hide,r=e.state;return t?i.a.createPortal(a.a.createElement(a.a.Fragment,null,a.a.createElement(_,null,a.a.createElement(U,null,"lost"===r&&a.a.createElement(H,null,"You lost \ud83d\ude22 Click ",a.a.createElement("i",null,"New Game")," to try again"),"won"===r&&a.a.createElement(H,null,"You won! \ud83c\udf89\ud83d\ude4c"),a.a.createElement(J,{style:{color:"#4444ee"},onClick:n},"Dismiss")))),document.body):null};function q(){var e=Object(u.a)(["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  color: #a34bde;\n"]);return q=function(){return e},e}var A=Object(s.b)(J)(q());var K=function(){var e=a.a.useState(0),t=Object(c.a)(e,2),n=t[0],r=t[1],o=a.a.useState(!0),i=Object(c.a)(o,1)[0];return a.a.useEffect((function(){if(i){var e=setInterval((function(){r(n+1)}),1e3);return function(){return clearInterval(e)}}}),[n]),a.a.createElement(a.a.Fragment,null,n>0?a.a.createElement(A,null,n):null)},V=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1];return{isShowing:n,toggle:function(){a(!n)}}},X=n(4),ee=n(15),te=n(16),ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"easy";Object(ee.a)(this,e),this.level=t,this.board=[],this.solutionBoard=[],this.rows=void 0,this.columns=void 0,this.bombs=void 0,this.eventQueue={movement:[],state:[]},this.gameState="new";var n={easy:.07,medium:.15,hard:.35};this.columns=Math.round(2*Math.pow(8,n[this.level]))+4,this.rows=Math.round(2*Math.pow(8,n[this.level]))+4,this.bombs=Math.round(Math.pow(this.columns,2)*n[this.level])+1,this.new()}return Object(te.a)(e,[{key:"new",value:function(){this.gameState="new",this.initializeEmptyBoard(),this.dispatchEvent("movement"),this.dispatchEvent("state")}},{key:"save",value:function(){}},{key:"load",value:function(){}},{key:"getCurrentGameParameters",value:function(){return{state:this.gameState,board:this.board,solutionBoard:this.solutionBoard,level:this.level}}},{key:"restoreGameParameters",value:function(e){var t=e.board,n=e.level,r=e.solutionBoard,a=e.state;this.board=t,this.level=n,this.solutionBoard=r,this.gameState=a}},{key:"getBoard",value:function(){return this.board}},{key:"getGameState",value:function(){return this.gameState}},{key:"gameOver",value:function(){return this.gameState="lost",this.board=this.solutionBoard,this.dispatchEvent("movement"),this.dispatchEvent("state"),this.board}},{key:"initializeEmptyBoard",value:function(){for(var e=[],t=0;t<this.columns;t++){e.push([]);for(var n=0;n<this.rows;n++)e[t][n]=null}return this.board=Object(X.a)(e.map((function(e){return Object(X.a)(e)}))),this.solutionBoard=Object(X.a)(e.map((function(e){return Object(X.a)(e)}))),this.board}},{key:"generateBoard",value:function(e,t){var n=this;return this.gameState="active",this.dispatchEvent("state"),this.getCoordsWithBombs().forEach((function(e){var t=Object(c.a)(e,2),r=t[0],a=t[1];n.solutionBoard[r][a]=10;for(var o=r-1;o<r+2;o++)for(var i=a-1;i<a+2;i++)-1!==o&&-1!==i&&o<n.columns&&i<n.rows&&10!==n.solutionBoard[o][i]&&(n.solutionBoard[o][i]+=1)})),this.executeSolution(e,t)}},{key:"updateBoard",value:function(e,t){return this.executeSolution(e,t)}},{key:"executeSolution",value:function(e,t){var n=this.solutionBoard[e][t];if(10===n)return this.gameOver();if(null===n)return this.revealZeros(e,t);var r=Object(X.a)(this.board.map((function(e){return Object(X.a)(e)})));return r[e][t]=n||0,this.board=r,this.checkWin(),this.dispatchEvent("movement"),this.board}},{key:"getCoordsWithBombs",value:function(){for(var e=this,t=this.bombs,n=[],r=function(){var r=e.getRandomCoord(0,e.columns-1),a=e.getRandomCoord(0,e.rows-1);n.find((function(e){return e[0]===r&&e[1]===a}))||(n.push([r,a]),t-=1)};t>0;)r();return n}},{key:"getRandomCoord",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"revealCell",value:function(e,t){switch(this.gameState){case"new":this.generateBoard(e,t);break;case"active":this.updateBoard(e,t)}}},{key:"placeFlag",value:function(e,t){if("new"===this.gameState||"active"===this.gameState){var n=Object(X.a)(this.board.map((function(e){return Object(X.a)(e)})));null===n[e][t]?n[e][t]=99:99===n[e][t]&&(n[e][t]=null),this.board=n,this.checkWin(),this.dispatchEvent("movement")}}},{key:"revealZeros",value:function(e,t,n){var r=n||Object(X.a)(this.board.map((function(e){return Object(X.a)(e)})));r[e][t]=0;for(var a=e-1;a<e+2;a++)for(var o=t-1;o<t+2;o++)-1!==a&&-1!==o&&a<this.columns&&o<this.rows&&10!==this.solutionBoard[a][o]&&(this.solutionBoard[a][o]>0?r[a][o]=this.solutionBoard[a][o]:null===r[a][o]&&this.revealZeros(a,o,r));return this.board=r,this.dispatchEvent("movement"),this.board}},{key:"checkWin",value:function(){var e=this.board.flat(1).filter((function(e){return null===e})).length;return console.log(this.board),console.log(e),e===this.bombs&&(this.board=this.solutionBoard,this.dispatchEvent("movement"),this.gameState="won",this.dispatchEvent("state")),this.board}},{key:"addEventListener",value:function(e,t){"movement"===e&&this.eventQueue.movement.push(t),"state"===e&&this.eventQueue.state.push(t)}},{key:"dispatchEvent",value:function(e){var t=this;"movement"===e?this.eventQueue.movement.forEach((function(e){return e(t.board)})):"state"===e&&this.eventQueue.state.forEach((function(e){return e(t.gameState)}))}}]),e}();function re(){var e=Object(u.a)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background: #e5e4ec;\n"]);return re=function(){return e},e}var ae=s.b.div(re());var oe=function(){var e=a.a.useState(new ne("medium")),t=Object(c.a)(e,1)[0],n=a.a.useState(t.getBoard()),r=Object(c.a)(n,2),o=r[0],i=r[1],u=a.a.useState(t.getGameState()),s=Object(c.a)(u,2),l=s[0],d=s[1],f=V(),h=f.isShowing,v=f.toggle;return a.a.useEffect((function(){t.addEventListener("movement",i),t.addEventListener("state",d),console.info("INSTRUCTIONS: Right click to reveal cell, left click to place a flag. Have fun!");var e=localStorage.getItem("game_instance");e&&(console.log("Restoring game parameters"),t.restoreGameParameters(JSON.parse(e)),i(t.getBoard()))}),[t]),a.a.useEffect((function(){"lost"!==l&&"won"!==l||v()}),[l]),a.a.useEffect((function(){localStorage.setItem("game_instance",JSON.stringify(t.getCurrentGameParameters()))}),[o]),a.a.createElement(ae,null,"active"===l&&a.a.createElement(K,null),a.a.createElement(Z,{startGame:function(){t.new()}}),a.a.createElement(W,null,a.a.createElement(Q,null,null===o||void 0===o?void 0:o.map((function(e,n){return a.a.createElement(R,{key:n},e.map((function(e,r){return a.a.createElement(M,{key:r,onClick:function(){return e=n,a=r,void t.revealCell(e,a);var e,a},onContextMenu:function(e){return function(e,n,r){e.preventDefault(),t.placeFlag(n,r)}(e,n,r)}},e)})))})))),a.a.createElement($,{isShowing:h,hide:v,state:l}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.5f35ff05.chunk.js.map